[gd_scene load_steps=16 format=2]

[ext_resource path="res://utils/Tileset.meshlib" type="MeshLibrary" id=1]
[ext_resource path="res://utils/Player.tscn" type="PackedScene" id=2]
[ext_resource path="res://utils/CeilingLight.tscn" type="PackedScene" id=3]
[ext_resource path="res://utils/Camera.gd" type="Script" id=4]
[ext_resource path="res://utils/CamArea.gd" type="Script" id=5]
[ext_resource path="res://SHFG Textures/fog1.png" type="Texture" id=6]
[ext_resource path="res://utils/CeilingLightColor.gd" type="Script" id=7]

[sub_resource type="Environment" id=1]
background_mode = 1
background_color = Color( 0.0235294, 0.0235294, 0.0235294, 1 )

[sub_resource type="BoxShape" id=2]

[sub_resource type="BoxShape" id=3]

[sub_resource type="Curve" id=4]
_data = [ Vector2( 0, 0 ), 0.0, 2.7044, 0, 0, Vector2( 0.21519, 1 ), 0.0, 0.0, 0, 0, Vector2( 0.917722, 0.620454 ), -1.70996, -1.70996, 0, 0, Vector2( 1, 0 ), -0.939974, 0.0, 0, 0 ]

[sub_resource type="CurveTexture" id=5]
curve = SubResource( 4 )

[sub_resource type="ParticlesMaterial" id=6]
lifetime_randomness = 0.72
emission_shape = 2
emission_box_extents = Vector3( 1, 1, 1 )
direction = Vector3( 0, 0, 0 )
spread = 78.51
flatness = 0.18
gravity = Vector3( 0, -0.3, 0 )
initial_velocity = 3.0
initial_velocity_random = 1.0
linear_accel = 0.07
tangential_accel = 2.3
tangential_accel_random = 0.39
damping = 10.44
damping_random = 0.8
angle = -74.5
angle_random = 0.45
scale = 30.0
scale_random = 0.88
scale_curve = SubResource( 5 )
color = Color( 1, 1, 1, 0.384314 )

[sub_resource type="SpatialMaterial" id=7]
flags_transparent = true
vertex_color_use_as_albedo = true
params_diffuse_mode = 1
params_specular_mode = 4
params_blend_mode = 1
params_depth_draw_mode = 3
params_line_width = 22.9
params_point_size = 16.8
params_billboard_mode = 3
particles_anim_h_frames = 1
particles_anim_v_frames = 1
particles_anim_loop = false
albedo_color = Color( 1, 1, 1, 0.192157 )
albedo_texture = ExtResource( 6 )
metallic_specular = 0.27

[sub_resource type="QuadMesh" id=8]
material = SubResource( 7 )
flip_faces = true

[node name="Level" type="Spatial"]

[node name="GridMap" type="GridMap" parent="."]
mesh_library = ExtResource( 1 )
data = {
"cells": PoolIntArray( -131054, 65514, -2146697216, 0, 65524, 1073741826, 1, 65524, 2, 2, 65524, -1610612734, 3, 65524, 2, 4, 65524, -536870910, 5, 65524, 2, 6, 65524, 1073741826, 7, 65524, -1610612734, 8, 65524, 1073741826, 9, 65524, 536870914, 65533, 65524, 1073741826, 65534, 65524, 1073741826, 65535, 65524, -536870910, 65536, 65524, -2147483648, 65537, 65524, 1610612736, 65541, 65524, -1073741824, 65542, 65524, 536870912, 65543, 65524, 536870912, 65544, 65524, -536870912, 65545, 65524, 1073741824, 131069, 65524, -536870912, 131070, 65524, 536870912, 131071, 65524, -2147483648, 131072, 65524, -1609826304, 131073, 65524, -536084480, 131077, 65524, 1611399168, 131078, 65524, 1610612736, 131079, 65524, 1073741824, 131080, 65524, -2147483648, 131081, 65524, -1073741824, 196605, 65524, -1609826304, 196606, 65524, 537657344, 196607, 65524, -2146697216, 196608, 65524, -2146697216, 196609, 65524, 786432, 196613, 65524, -1072955392, 262141, 65524, 1611399168, 262142, 65524, -2146697216, 262143, 65524, -2146697216, -65536, 65524, -536870909, -65535, 65524, -536870909, -65534, 65524, 3, -65533, 65524, 536870915, -65532, 65524, 1073741827, -65531, 65524, -536870909, -65530, 65524, 1610612739, -65529, 65524, -536870909, -65528, 65524, 1610612739, -65527, 65524, -536870909, -3, 65524, 1610612739, -2, 65524, 1073741827, -1, 65524, 536870915, 1, 65525, -2147483646, 5, 65525, -1073741822, 9, 65525, -536870910, 65533, 65525, -1610612734, 65537, 65525, 536870912, 65541, 65525, 536870912, 65545, 65525, 0, 131069, 65525, -1610612736, 131073, 65525, 537657344, 131077, 65525, -536084480, 131081, 65525, -1610612736, 196605, 65525, 1074528256, 196609, 65525, 1611399168, 196610, 65525, -1610612736, 196611, 65525, 1610612736, 196612, 65525, -1073741824, 196613, 65525, 1074528256, 262141, 65525, 536870912, -65536, 65525, -2147483647, -65535, 65525, -1073741821, -65534, 65525, -536870911, -65533, 65525, -1610612735, -65532, 65525, -1073741823, -65531, 65525, 536870915, -65530, 65525, -536870911, -65529, 65525, 1610612737, -65528, 65525, -536870911, -65527, 65525, 536870915, -3, 65525, -1610612733, -2, 65525, 1, -1, 65525, -536870911, 1, 65526, -1073741822, 5, 65526, -2147483646, 9, 65526, -536870910, 65533, 65526, 2, 65537, 65526, -536870912, 65541, 65526, 1610612736, 65545, 65526, 536870912, 131069, 65526, -1610612736, 131073, 65526, -1609826304, 131077, 65526, 1074528256, 131081, 65526, 1073741824, 196605, 65526, -536084480, 196609, 65526, -1072955392, 196610, 65526, -1609826304, 196611, 65526, 536870912, 196612, 65526, -536084480, 196613, 65526, 786432, 262141, 65526, -2147483648, -65536, 65526, -2147483647, -65535, 65526, -1073741821, -65534, 65526, -1610612735, -65533, 65526, -2147483647, -65532, 65526, 536870913, -65531, 65526, -1610612733, -65530, 65526, -1610612735, -65529, 65526, 536870913, -65528, 65526, 536870913, -65527, 65526, 536870915, -3, 65526, -1073741821, -2, 65526, -1073741823, -1, 65526, -1610612735, 9, 65527, -2147483646, 65533, 65527, 2, 65545, 65527, -2147483648, 131069, 65527, -1610612736, 131077, 65527, -1072955392, 131081, 65527, 0, 196605, 65527, 1611399168, 196613, 65527, 1610612736, 262141, 65527, -1073741824, -65536, 65527, -536870911, -65535, 65527, 1610612737, -65534, 65527, -2147483647, -65533, 65527, -1073741823, -65532, 65527, 1610612737, -65531, 65527, -1610612735, -65530, 65527, 536870913, -65529, 65527, -536870911, -65528, 65527, -1073741823, -65527, 65527, 536870915, -3, 65527, 536870915, -2, 65527, -2147483647, -1, 65527, 536870913, 1, 65528, -1073741822, 2, 65528, -2147483646, 4, 65528, -1073741822, 5, 65528, 1610612738, 9, 65528, 1610612738, 65533, 65528, 1610612738, 65537, 65528, 1610612736, 65538, 65528, -536870912, 65540, 65528, -1610612736, 65541, 65528, -1610612736, 65545, 65528, -1610612736, 131069, 65528, -2147483648, 131073, 65528, -536870912, 131074, 65528, 1073741824, 131076, 65528, 1611399168, 131077, 65528, 786432, 131081, 65528, 0, 196605, 65528, -2146697216, 196609, 65528, 536870912, 196610, 65528, -536870912, 196612, 65528, 1610612736, 196613, 65528, -1073741824, 262141, 65528, -1610612736, -65536, 65528, -1610612735, -65535, 65528, -2147483645, -65534, 65528, -2147483645, -65533, 65528, 1610612737, -65532, 65528, 1610612739, -65531, 65528, 1073741827, -65530, 65528, 1, -65529, 65528, -1610612735, -65528, 65528, -1610612735, -65527, 65528, -536870909, -3, 65528, -2147483645, -2, 65528, 1610612737, -1, 65528, 1610612737, 1, 65529, 1610612738, 2, 65529, 2, 4, 65529, -1073741822, 5, 65529, 536870914, 9, 65529, 1073741826, 65533, 65529, 2, 65537, 65529, -2147483648, 65538, 65529, -1072955392, 65540, 65529, -536870912, 65541, 65529, 536870912, 65545, 65529, -2147483648, 131069, 65529, -1073741824, 131073, 65529, -536870912, 131074, 65529, 0, 131076, 65529, 1074528256, 131077, 65529, 786432, 131081, 65529, -1073741824, 196605, 65529, -536084480, 196610, 65529, 0, 196612, 65529, 1073741824, 262141, 65529, -2147483648, -65536, 65529, 1610612737, -65535, 65529, -1610612733, -65534, 65529, -536870909, -65533, 65529, -2147483647, -65532, 65529, -1073741821, -65531, 65529, -1610612733, -65530, 65529, -536870911, -65529, 65529, -1073741823, -65528, 65529, -1610612735, -65527, 65529, 1073741827, -3, 65529, -1073741821, -2, 65529, 536870913, -1, 65529, 536870913, 0, 65530, -536084480, 1, 65530, -1610612734, 2, 65530, -536870910, 4, 65530, -1073741822, 5, 65530, -1073741822, 6, 65530, -2147483646, 7, 65530, 1610612738, 8, 65530, 536870914, 9, 65530, -1073741822, 65533, 65530, 536870914, 65534, 65530, 2, 65535, 65530, -1073741822, 65536, 65530, 1073741824, 65537, 65530, 536870912, 65538, 65530, 0, 65540, 65530, 1073741824, 65541, 65530, -536870912, 65542, 65530, 1610612736, 65543, 65530, 536870912, 65544, 65530, -1610612736, 65545, 65530, -2147483648, 131069, 65530, 536870912, 131070, 65530, 536870912, 131071, 65530, 1073741824, 131072, 65530, -2146697216, 131073, 65530, 1610612736, 131074, 65530, -1073741824, 131076, 65530, 1441792, 131077, 65530, 537657344, 131078, 65530, -536084480, 131079, 65530, 1611399168, 131080, 65530, -1073741824, 131081, 65530, 536870912, 196605, 65530, 786432, 196606, 65530, -536084480, 196607, 65530, -2146041856, 196608, 65530, -1610612736, 196609, 65530, -536870912, 196610, 65530, -1610612736, 196612, 65530, -1073741824, 196613, 65530, -2147483648, 196614, 65530, 1073741824, 196615, 65530, 1073741824, 262141, 65530, 536870912, 262142, 65530, -1610612736, 262143, 65530, 1073741824, -65536, 65530, -1610612733, -65535, 65530, 1073741827, -65534, 65530, 536870915, -65533, 65530, 1073741825, -65532, 65530, -536870909, -65531, 65530, 1610612739, -65530, 65530, 3, -65529, 65530, -1610612733, -65528, 65530, -536870909, -65527, 65530, -1610612733, -3, 65530, -2147483645, -2, 65530, -1073741821, -1, 65530, 1073741827, 0, 65531, 1610612738, 6, 65531, 1610612738, 65536, 65531, 0, 65542, 65531, -1073741824, 196608, 65531, 1610612736, 196614, 65531, -2147483648, -65536, 65531, 3, -65535, 65531, -536870911, -65534, 65531, -1073741823, -65533, 65531, 1, -65532, 65531, 536870913, -65531, 65531, -536870911, -65530, 65531, 536870915, 0, 65532, -2147483646, 6, 65532, -1610612734, 65536, 65532, 536870912, 65542, 65532, 1610612736, 131072, 65532, -535429120, 131078, 65532, -536084480, 196608, 65532, -1610612736, -65536, 65532, -2147483645, -65535, 65532, -536870911, -65534, 65532, 1073741825, -65533, 65532, -2147483647, -65532, 65532, 536870913, -65531, 65532, -536870911, -65530, 65532, 1073741827, 0, 65533, 2, 6, 65533, 536870914, 65536, 65533, -1610612736, 65542, 65533, 1610612736, 131072, 65533, 1612054528, 131078, 65533, 537657344, 196608, 65533, 1073741824, -65536, 65533, 536870915, -65535, 65533, -1073741823, -65534, 65533, -1073741823, -65533, 65533, -536870911, -65532, 65533, -1073741823, -65531, 65533, 1610612737, -65530, 65533, -1610612733, -65529, 65533, -2147483645, 0, 65534, 1073741826, 6, 65534, 1610612738, 65536, 65534, -1073741824, 65542, 65534, -2147483648, 131072, 65534, 538312704, 131078, 65534, 1611399168, -65536, 65534, 1073741827, -65535, 65534, -2147483647, -65534, 65534, -1073741823, -65533, 65534, -536870911, -65532, 65534, -1073741823, -65531, 65534, -1610612735, -65530, 65534, -536870909, 1, 65535, -2147483646, 2, 65535, 1073741826, 3, 65535, 1610612738, 4, 65535, -1610612734, 5, 65535, 1610612738, 65537, 65535, 1610612736, 65538, 65535, 1610612736, 65539, 65535, 1610612736, 65540, 65535, -2147483648, 65541, 65535, 1610612736, -65535, 65535, 1073741827, -65534, 65535, 1073741827, -65533, 65535, 1073741827, -65532, 65535, 1073741827, -65531, 65535, -2147483645 )
}
__meta__ = {
"_editor_clip_": 0,
"_editor_floor_": Vector3( 0, 3, -1 )
}

[node name="LightContainer" type="Spatial" parent="GridMap"]

[node name="CeilingLight" parent="GridMap/LightContainer" instance=ExtResource( 3 )]
transform = Transform( 0.721869, -0.504195, 0.474018, -0.0514057, 0.644007, 0.763291, -0.690118, -0.575363, 0.43897, 11.4969, 4.60659, -2.3948 )
light_energy = 16.0
light_indirect_energy = 10.15
light_specular = 0.31
shadow_bias = -16.0
spot_range = 11.0
spot_attenuation = 1.30583
spot_angle = 60.1
spot_angle_attenuation = 0.870551

[node name="LightContainer2" type="Spatial" parent="GridMap"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 8, 0, -11 )

[node name="CeilingLight" parent="GridMap/LightContainer2" instance=ExtResource( 3 )]
transform = Transform( 1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 7, 9, -6 )
light_energy = 16.0
spot_range = 11.0
spot_attenuation = 1.5
spot_angle = 39.5

[node name="LightContainer3" type="Spatial" parent="GridMap"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -8, 0, -11 )

[node name="CeilingLight" parent="GridMap/LightContainer3" instance=ExtResource( 3 )]
transform = Transform( 1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 7, 9, -6 )
light_energy = 16.0
spot_range = 11.0
spot_attenuation = 1.5
spot_angle = 39.5
script = ExtResource( 7 )

[node name="outside strobbing light" type="Spatial" parent="GridMap"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -8, 0, -11 )

[node name="CeilingLight" parent="GridMap/outside strobbing light" instance=ExtResource( 3 )]
transform = Transform( -0.176731, -0.63285, -0.753835, -0.0828669, -0.753605, 0.652084, -0.980765, 0.177711, 0.0807427, 5.63091, 9.07115, -21.2129 )
light_energy = 16.0
spot_range = 11.0
spot_attenuation = 1.5
spot_angle = 39.5
script = ExtResource( 7 )

[node name="LightContainer4" type="Spatial" parent="GridMap"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -8, 0, -11 )

[node name="CeilingLight" parent="GridMap/LightContainer4" instance=ExtResource( 3 )]
transform = Transform( 0.996472, -0.0402238, 0.0736535, 0.0276874, 0.986083, 0.163934, -0.0792224, -0.161316, 0.983718, 15.2183, 3.90237, 2.17352 )
light_energy = 16.0
spot_range = 30.2
spot_attenuation = 1.17688
spot_angle = 34.3
spot_angle_attenuation = 0.554785
script = null

[node name="Player" parent="." instance=ExtResource( 2 )]
transform = Transform( -0.987628, 0, 0.156814, 0, 1, 0, -0.156814, 0, -0.987628, 5.18707, 0.716533, -4 )
collision/safe_margin = 0.002

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource( 1 )

[node name="Camera" type="Camera" parent="."]
transform = Transform( 0.866025, 4.14089e-09, -0.5, 0.25, 0.866025, 0.433013, 0.433013, -0.5, 0.75, 2.52295, 4.00361, -2 )
current = true
script = ExtResource( 4 )

[node name="CamArea" type="Area" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.104289 )
script = ExtResource( 5 )

[node name="CollisionShape" type="CollisionShape" parent="CamArea"]
transform = Transform( 5, 0, 0, 0, 1, 0, 0, 0, 5, 7, 0, -6 )
shape = SubResource( 2 )

[node name="Camera" type="Camera" parent="CamArea"]
transform = Transform( 1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 7, 7, -6 )

[node name="CamArea4" type="Area" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -11.4238 )
script = ExtResource( 5 )

[node name="CollisionShape" type="CollisionShape" parent="CamArea4"]
transform = Transform( 2, 0, 0, 0, 1, 0, 0, 0, 2.3, 7, 0, -2.00867 )
shape = SubResource( 2 )

[node name="Camera" type="Camera" parent="CamArea4"]
transform = Transform( 0.999848, 0.00451701, -0.0168577, 0.00451702, 0.866036, 0.499962, 0.0168577, -0.499962, 0.865883, 6.93057, 3.94552, 1.90107 )
fov = 92.3
near = 0.02

[node name="CamArea2" type="Area" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -8, 0, -12 )
script = ExtResource( 5 )

[node name="CollisionShape" type="CollisionShape" parent="CamArea2"]
transform = Transform( 5, 0, 0, 0, 1, 0, 0, 0, 5, 7, 0, -6 )
shape = SubResource( 2 )

[node name="Camera" type="Camera" parent="CamArea2"]
transform = Transform( -0.775882, 0.317232, -0.545318, -0.000290287, 0.864199, 0.50315, 0.630878, 0.390543, -0.670424, 5, 5, -9 )
script = ExtResource( 4 )

[node name="Area" type="Area" parent="CamArea2/Camera"]
transform = Transform( 1, -1.2604e-08, 1.42253e-08, -9.80893e-09, 1, 1.87988e-08, 1.3364e-08, -9.89335e-08, 1, 2.90536e-07, -4.12082e-07, -8.95572e-07 )

[node name="CollisionShape" type="CollisionShape" parent="CamArea2/Camera/Area"]
transform = Transform( 1, -5.0553e-09, 1.61143e-08, 1.57712e-08, 1, 5.06044e-09, 6.12416e-09, 6.09855e-08, 1, 3.0917e-07, 2.68221e-07, 1.19209e-07 )
shape = SubResource( 3 )

[node name="CamArea5" type="Area" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -8, 0, -12 )
script = ExtResource( 5 )

[node name="CollisionShape" type="CollisionShape" parent="CamArea5"]
transform = Transform( 4, 0, 0, 0, 1, 0, 0, 0, 1, 14.1806, 0, -5.05231 )
shape = SubResource( 2 )

[node name="Camera" type="Camera" parent="CamArea5"]
transform = Transform( 0.976814, -0.10734, 0.185236, -0.128202, 0.399664, 0.907652, -0.17146, -0.910355, 0.376637, 15.8385, 4.72292, -4.01454 )
current = true
script = ExtResource( 4 )

[node name="Area" type="Area" parent="CamArea5/Camera"]
transform = Transform( 1, -1.2604e-08, 1.42253e-08, -9.80893e-09, 1, 1.87988e-08, 1.3364e-08, -9.89335e-08, 1, 2.90536e-07, -4.12082e-07, -8.95572e-07 )

[node name="CollisionShape" type="CollisionShape" parent="CamArea5/Camera/Area"]
transform = Transform( 1, -5.0553e-09, 1.61143e-08, 1.57712e-08, 1, 5.06044e-09, 6.12416e-09, 6.09855e-08, 1, 3.0917e-07, 2.68221e-07, 1.19209e-07 )
shape = SubResource( 3 )

[node name="CamArea3" type="Area" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 8, 0, -12 )
script = ExtResource( 5 )

[node name="CollisionShape" type="CollisionShape" parent="CamArea3"]
transform = Transform( 5, 0, 0, 0, 1, 0, 0, 0, 5, 7.14707, -4.76837e-07, -6.02608 )
shape = SubResource( 2 )

[node name="Camera" type="Camera" parent="CamArea3"]
transform = Transform( -0.994554, 0.0664649, -0.0802742, 0.0598164, 0.994789, 0.0825658, 0.0853436, 0.0773145, -0.993347, 7, 0.978002, -9.68641 )
script = ExtResource( 4 )

[node name="Area" type="Area" parent="CamArea3/Camera"]
transform = Transform( 0.825481, -0.23048, 0.515228, -0.00308174, 0.910975, 0.41245, -0.564422, -0.342057, 0.751282, 18.2011, 2.85774, 1.09517 )

[node name="CollisionShape" type="CollisionShape" parent="CamArea3/Camera/Area"]
transform = Transform( 1, -5.0553e-09, 1.61143e-08, 1.57712e-08, 1, 5.06044e-09, 6.12416e-09, 6.09855e-08, 1, 3.0917e-07, 2.68221e-07, 1.19209e-07 )
shape = SubResource( 3 )

[node name="Particles" type="Particles" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 6.72297, 4.60876, -34.4663 )
cast_shadow = 0
amount = 38
lifetime = 30.32
preprocess = 4.2
speed_scale = 1.2
explosiveness = 0.49
randomness = 0.34
visibility_aabb = AABB( -12.181, -5.86931, -4.85679, 26.235, 15.764, 13.1413 )
draw_order = 2
process_material = SubResource( 6 )
draw_pass_1 = SubResource( 8 )
